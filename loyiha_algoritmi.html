<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loyiha Algoritmi - Vizual Diagramma</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: bold;
            background: #e9ecef;
            border: none;
            transition: all 0.3s;
        }
        
        .tab:hover {
            background: #dee2e6;
        }
        
        .tab.active {
            background: white;
            color: #1e3c72;
            border-bottom: 3px solid #667eea;
        }
        
        .content {
            padding: 30px;
        }
        
        canvas {
            border: 3px solid #1e3c72;
            border-radius: 10px;
            display: block;
            margin: 20px auto;
            cursor: pointer;
            background: #f8f9fa;
        }
        
        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid;
        }
        
        .legend-box {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            border-radius: 5px;
        }
        
        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #0c5460;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 25px;
            margin: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä LOYIHA ALGORITMI</h1>
            <p>Fizika Modellarini Yaratish va Deploy Qilish Jarayoni</p>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showDiagram(1)">1. Umumiy Arxitektura</button>
            <button class="tab" onclick="showDiagram(2)">2. Model Ishlash</button>
            <button class="tab" onclick="showDiagram(3)">3. Deploy Jarayoni</button>
            <button class="tab" onclick="showDiagram(4)">4. Foydalanuvchi Oqimi</button>
        </div>
        
        <div class="content">
            <canvas id="diagramCanvas" width="1300" height="800"></canvas>
            
            <div class="info-box" id="infoBox">
                <h3>‚ÑπÔ∏è Ma'lumot</h3>
                <p id="infoText">Diagramma ustiga bosing yoki o'xga o'ting ko'proq ma'lumot olish uchun.</p>
            </div>
            
            <div class="legend">
                <div class="legend-item" style="border-color: #667eea;">
                    <div class="legend-box" style="background: #667eea;"></div>
                    <span>Boshlang'ich Jarayon</span>
                </div>
                <div class="legend-item" style="border-color: #28a745;">
                    <div class="legend-box" style="background: #28a745;"></div>
                    <span>Ishlov Berish</span>
                </div>
                <div class="legend-item" style="border-color: #ffc107;">
                    <div class="legend-box" style="background: #ffc107;"></div>
                    <span>Qaror Qabul Qilish</span>
                </div>
                <div class="legend-item" style="border-color: #dc3545;">
                    <div class="legend-box" style="background: #dc3545;"></div>
                    <span>Yakuniy Natija</span>
                </div>
                <div class="legend-item" style="border-color: #17a2b8;">
                    <div class="legend-box" style="background: #17a2b8;"></div>
                    <span>Ma'lumotlar Bazasi</span>
                </div>
                <div class="legend-item" style="border-color: #6f42c1;">
                    <div class="legend-box" style="background: #6f42c1;"></div>
                    <span>Foydalanuvchi</span>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="downloadDiagram()">üì• Diagrammani Yuklab Olish</button>
                <button class="btn" onclick="printDiagram()">üñ®Ô∏è Chop Etish</button>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('diagramCanvas');
        const ctx = canvas.getContext('2d');
        let currentDiagram = 1;
        
        // Rang palitra
        const colors = {
            start: '#667eea',
            process: '#28a745',
            decision: '#ffc107',
            end: '#dc3545',
            data: '#17a2b8',
            user: '#6f42c1',
            arrow: '#495057'
        };
        
        // To'rtburchak chizish
        function drawRect(x, y, w, h, color, text, icon = '') {
            // Soya
            ctx.shadowColor = 'rgba(0,0,0,0.2)';
            ctx.shadowBlur = 10;
            ctx.shadowOffsetX = 3;
            ctx.shadowOffsetY = 3;
            
            // Gradient
            const gradient = ctx.createLinearGradient(x, y, x, y + h);
            gradient.addColorStop(0, color);
            gradient.addColorStop(1, shadeColor(color, -20));
            
            ctx.fillStyle = gradient;
            ctx.roundRect(x, y, w, h, 10);
            ctx.fill();
            
            // Chegara
            ctx.shadowColor = 'transparent';
            ctx.strokeStyle = shadeColor(color, -40);
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Matn
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // Ikon
            if (icon) {
                ctx.font = '20px Arial';
                ctx.fillText(icon, x + w/2, y + h/2 - 15);
                ctx.font = 'bold 14px Arial';
                ctx.fillText(text, x + w/2, y + h/2 + 10);
            } else {
                wrapText(ctx, text, x + w/2, y + h/2, w - 20, 18);
            }
        }
        
        // Romb (decision) chizish
        function drawDiamond(x, y, w, h, color, text) {
            ctx.shadowColor = 'rgba(0,0,0,0.2)';
            ctx.shadowBlur = 10;
            ctx.shadowOffsetX = 3;
            ctx.shadowOffsetY = 3;
            
            const gradient = ctx.createLinearGradient(x, y - h/2, x, y + h/2);
            gradient.addColorStop(0, color);
            gradient.addColorStop(1, shadeColor(color, -20));
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.moveTo(x, y - h/2);
            ctx.lineTo(x + w/2, y);
            ctx.lineTo(x, y + h/2);
            ctx.lineTo(x - w/2, y);
            ctx.closePath();
            ctx.fill();
            
            ctx.shadowColor = 'transparent';
            ctx.strokeStyle = shadeColor(color, -40);
            ctx.lineWidth = 2;
            ctx.stroke();
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 13px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            wrapText(ctx, text, x, y, w - 30, 16);
        }
        
        // Doira chizish
        function drawCircle(x, y, r, color, text, icon = '') {
            ctx.shadowColor = 'rgba(0,0,0,0.2)';
            ctx.shadowBlur = 10;
            ctx.shadowOffsetX = 3;
            ctx.shadowOffsetY = 3;
            
            const gradient = ctx.createRadialGradient(x, y, 0, x, y, r);
            gradient.addColorStop(0, color);
            gradient.addColorStop(1, shadeColor(color, -20));
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(x, y, r, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.shadowColor = 'transparent';
            ctx.strokeStyle = shadeColor(color, -40);
            ctx.lineWidth = 2;
            ctx.stroke();
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            if (icon) {
                ctx.font = '24px Arial';
                ctx.fillText(icon, x, y - 10);
                ctx.font = 'bold 12px Arial';
                ctx.fillText(text, x, y + 15);
            } else {
                wrapText(ctx, text, x, y, r * 1.6, 16);
            }
        }
        
        // O'q chizish
        function drawArrow(x1, y1, x2, y2, label = '', curved = false) {
            ctx.strokeStyle = colors.arrow;
            ctx.lineWidth = 2;
            ctx.fillStyle = colors.arrow;
            
            if (curved) {
                const cp = {x: (x1 + x2) / 2 + 50, y: (y1 + y2) / 2};
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.quadraticCurveTo(cp.x, cp.y, x2, y2);
                ctx.stroke();
            } else {
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.stroke();
            }
            
            // O'q boshi
            const angle = Math.atan2(y2 - y1, x2 - x1);
            ctx.beginPath();
            ctx.moveTo(x2, y2);
            ctx.lineTo(x2 - 15 * Math.cos(angle - Math.PI/6), y2 - 15 * Math.sin(angle - Math.PI/6));
            ctx.lineTo(x2 - 15 * Math.cos(angle + Math.PI/6), y2 - 15 * Math.sin(angle + Math.PI/6));
            ctx.closePath();
            ctx.fill();
            
            // Label
            if (label) {
                const mx = (x1 + x2) / 2;
                const my = (y1 + y2) / 2;
                ctx.fillStyle = '#fff';
                ctx.fillRect(mx - 30, my - 10, 60, 20);
                ctx.fillStyle = colors.arrow;
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(label, mx, my + 5);
            }
        }
        
        // Matnni o'rash
        function wrapText(context, text, x, y, maxWidth, lineHeight) {
            const words = text.split(' ');
            let line = '';
            const lines = [];
            
            for (let n = 0; n < words.length; n++) {
                const testLine = line + words[n] + ' ';
                const metrics = context.measureText(testLine);
                if (metrics.width > maxWidth && n > 0) {
                    lines.push(line);
                    line = words[n] + ' ';
                } else {
                    line = testLine;
                }
            }
            lines.push(line);
            
            const startY = y - (lines.length - 1) * lineHeight / 2;
            for (let i = 0; i < lines.length; i++) {
                context.fillText(lines[i], x, startY + i * lineHeight);
            }
        }
        
        // Rangni to'q/och qilish
        function shadeColor(color, percent) {
            let R = parseInt(color.substring(1,3),16);
            let G = parseInt(color.substring(3,5),16);
            let B = parseInt(color.substring(5,7),16);
            
            R = parseInt(R * (100 + percent) / 100);
            G = parseInt(G * (100 + percent) / 100);
            B = parseInt(B * (100 + percent) / 100);
            
            R = (R<255)?R:255;  
            G = (G<255)?G:255;  
            B = (B<255)?B:255;  
            
            const RR = ((R.toString(16).length==1)?"0"+R.toString(16):R.toString(16));
            const GG = ((G.toString(16).length==1)?"0"+G.toString(16):G.toString(16));
            const BB = ((B.toString(16).length==1)?"0"+B.toString(16):B.toString(16));
            
            return "#"+RR+GG+BB;
        }
        
        // RoundRect polyfill
        if (!CanvasRenderingContext2D.prototype.roundRect) {
            CanvasRenderingContext2D.prototype.roundRect = function(x, y, w, h, r) {
                this.beginPath();
                this.moveTo(x + r, y);
                this.lineTo(x + w - r, y);
                this.arcTo(x + w, y, x + w, y + r, r);
                this.lineTo(x + w, y + h - r);
                this.arcTo(x + w, y + h, x + w - r, y + h, r);
                this.lineTo(x + r, y + h);
                this.arcTo(x, y + h, x, y + h - r, r);
                this.lineTo(x, y + r);
                this.arcTo(x, y, x + r, y, r);
                this.closePath();
            };
        }
        
        // DIAGRAMMA 1: Umumiy Arxitektura
        function drawDiagram1() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Sarlavha
            ctx.fillStyle = '#1e3c72';
            ctx.font = 'bold 24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('UMUMIY LOYIHA ARXITEKTURASI', canvas.width/2, 40);
            
            // 1. Boshlash
            drawCircle(150, 120, 50, colors.start, 'BOSHLASH', 'üöÄ');
            
            // 2. Talablarni aniqlash
            drawRect(80, 200, 140, 70, colors.process, 'Talablarni Aniqlash', 'üìã');
            drawArrow(150, 170, 150, 200);
            
            // 3. Dizayn
            drawRect(80, 300, 140, 70, colors.process, 'UI/UX Dizayn', 'üé®');
            drawArrow(150, 270, 150, 300);
            
            // 4. Model yaratish (3 ta model)
            const modelY = 450;
            
            // Rezerford
            drawRect(50, modelY, 150, 90, colors.data, 'Rezerford\nTajribasi\nModeli', '‚öõÔ∏è');
            drawArrow(150, 370, 125, modelY);
            
            // Kepler
            drawRect(250, modelY, 150, 90, colors.data, 'Kepler\nQonunlari\nModeli', 'ü™ê');
            drawArrow(150, 370, 325, modelY);
            
            // Meme
            drawRect(450, modelY, 150, 90, colors.data, 'Sarkazm\nMeme\nModeli', 'üòè');
            drawArrow(150, 370, 525, modelY);
            
            // 5. Dars ishlanmalar
            drawRect(700, 200, 150, 80, colors.process, 'Dars\nIshlanmalar', 'üìö');
            drawArrow(220, 235, 700, 240);
            
            // 6. Testlar
            drawRect(700, 310, 150, 80, colors.process, 'Testlar\nYaratish', 'üìù');
            drawArrow(220, 335, 700, 350);
            
            // 7. Metodika
            drawRect(700, 420, 150, 80, colors.process, 'Metodika\nQo\'llanma', 'üë®‚Äçüè´');
            drawArrow(600, 495, 700, 460);
            
            // 8. GitHub
            drawRect(950, 280, 140, 70, colors.decision, 'GitHub\nRepository', 'üîß');
            drawArrow(850, 240, 950, 305);
            drawArrow(850, 350, 950, 325);
            drawArrow(850, 460, 950, 335);
            
            // 9. Deploy
            drawDiamond(1020, 450, 140, 100, colors.decision, 'Deploy\nPlatforma?');
            drawArrow(1020, 350, 1020, 400);
            
            // Deploy variantlari
            drawRect(900, 580, 100, 60, colors.end, 'Netlify', 'üåê');
            drawArrow(990, 500, 950, 580, 'Oson');
            
            drawRect(1020, 580, 100, 60, colors.end, 'Railway', 'üöÇ');
            drawArrow(1020, 500, 1070, 580, 'Flexible');
            
            drawRect(1140, 580, 100, 60, colors.end, 'Vercel', '‚ñ≤');
            drawArrow(1050, 500, 1190, 580, 'Pro');
            
            // 10. Live Website
            drawCircle(1020, 720, 60, colors.user, 'JONLI SAYT', 'üåç');
            drawArrow(950, 640, 980, 680);
            drawArrow(1070, 640, 1050, 680);
            drawArrow(1190, 640, 1060, 680);
        }
        
        // DIAGRAMMA 2: Model Ishlashi
        function drawDiagram2() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#1e3c72';
            ctx.font = 'bold 24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('INTERAKTIV MODEL ISHLASH ALGORITMI', canvas.width/2, 40);
            
            // Foydalanuvchi
            drawCircle(150, 120, 50, colors.user, 'Foydalanuvchi', 'üë§');
            
            // Brauzer
            drawRect(80, 200, 140, 60, colors.start, 'Brauzer\nOchish', 'üåê');
            drawArrow(150, 170, 150, 200);
            
            // HTML yuklash
            drawRect(80, 290, 140, 60, colors.process, 'HTML\nYuklash', 'üìÑ');
            drawArrow(150, 260, 150, 290);
            
            // JavaScript init
            drawRect(80, 380, 140, 60, colors.process, 'JavaScript\nInit', '‚öôÔ∏è');
            drawArrow(150, 350, 150, 380);
            
            // Canvas
            drawRect(80, 470, 140, 60, colors.data, 'Canvas\nYaratish', 'üé®');
            drawArrow(150, 440, 150, 470);
            
            // Event listeners
            drawRect(270, 470, 140, 60, colors.process, 'Event\nListeners', 'üëÜ');
            drawArrow(220, 500, 270, 500);
            
            // User input
            drawDiamond(340, 600, 140, 100, colors.decision, 'Foydalanuvchi\nHarakati?');
            drawArrow(340, 530, 340, 550);
            
            // Slider
            drawRect(150, 680, 120, 50, colors.process, 'Slider\nO\'zgartirish', 'üéöÔ∏è');
            drawArrow(300, 630, 210, 680, 'Slider');
            
            // Button
            drawRect(300, 680, 120, 50, colors.process, 'Tugma\nBosish', 'üîò');
            drawArrow(340, 650, 360, 680, 'Button');
            
            // Click
            drawRect(450, 680, 120, 50, colors.process, 'Canvas\nClick', 'üñ±Ô∏è');
            drawArrow(380, 630, 510, 680, 'Click');
            
            // Update state
            drawRect(600, 580, 140, 60, colors.data, 'State\nYangilash', 'üíæ');
            drawArrow(270, 705, 600, 610);
            drawArrow(360, 705, 600, 610);
            drawArrow(510, 705, 600, 610);
            
            // Calculate
            drawRect(600, 470, 140, 60, colors.process, 'Hisoblashlar\nBajarish', 'üßÆ');
            drawArrow(670, 580, 670, 530);
            
            // Draw
            drawRect(600, 360, 140, 60, colors.process, 'Canvas\nChizish', '‚úèÔ∏è');
            drawArrow(670, 470, 670, 420);
            
            // Animate
            drawDiamond(670, 260, 140, 100, colors.decision, 'Animatsiya\nKerakmi?');
            drawArrow(670, 360, 670, 310);
            
            // RequestAnimationFrame
            drawRect(820, 240, 160, 60, colors.process, 'Request\nAnimation\nFrame', 'üé¨');
            drawArrow(740, 260, 820, 270, 'Ha');
            
            // Loop back
            drawArrow(900, 300, 900, 500);
            drawArrow(900, 500, 740, 500);
            
            // Display
            drawCircle(670, 150, 50, colors.end, 'Ekranda\nKo\'rsatish', 'üì∫');
            drawArrow(670, 210, 670, 200, 'Yo\'q');
            
            // User sees
            drawArrow(670, 100, 500, 100);
            drawArrow(500, 100, 500, 600, 'Yana harakat');
            drawArrow(500, 600, 410, 600);
            
            // Legend
            ctx.font = 'bold 12px Arial';
            ctx.fillStyle = '#666';
            ctx.textAlign = 'left';
            ctx.fillText('Real-time interaktiv loop', 900, 400);
        }
        
        // DIAGRAMMA 3: Deploy Jarayoni
        function drawDiagram3() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#1e3c72';
            ctx.font = 'bold 24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('DEPLOY JARAYONI ALGORITMI', canvas.width/2, 40);
            
            // Developer
            drawCircle(150, 120, 50, colors.user, 'Developer', 'üë®‚Äçüíª');
            
            // Local development
            drawRect(80, 200, 140, 70, colors.process, 'Local\nDevelopment', 'üíª');
            drawArrow(150, 170, 150, 200);
            
            // Git commit
            drawRect(80, 300, 140, 70, colors.process, 'Git Commit', 'üìù');
            drawArrow(150, 270, 150, 300);
            
            // Git push
            drawRect(80, 400, 140, 70, colors.data, 'Git Push\nGitHub', '‚òÅÔ∏è');
            drawArrow(150, 370, 150, 400);
            
            // GitHub
            drawRect(300, 380, 160, 110, colors.start, 'GitHub\nRepository\n(Source Code)', 'üîß');
            drawArrow(220, 435, 300, 435);
            
            // Choose platform
            drawDiamond(550, 435, 160, 120, colors.decision, 'Deploy\nPlatforma\nTanlash?');
            drawArrow(460, 435, 470, 435);
            
            // NETLIFY yo'li
            const netlifyX = 300;
            const netlifyY = 600;
            
            drawRect(netlifyX, netlifyY, 140, 60, colors.process, 'Netlify\nConnect', 'üåê');
            drawArrow(520, 470, netlifyX + 70, netlifyY, 'Netlify');
            
            drawRect(netlifyX, netlifyY + 90, 140, 60, colors.process, 'Auto Build', 'üî®');
            drawArrow(netlifyX + 70, netlifyY + 60, netlifyX + 70, netlifyY + 90);
            
            drawCircle(netlifyX + 70, netlifyY + 200, 50, colors.end, 'Live!', '‚úÖ');
            drawArrow(netlifyX + 70, netlifyY + 150, netlifyX + 70, netlifyY + 150);
            
            // RAILWAY yo'li
            const railwayX = 550;
            const railwayY = 600;
            
            drawRect(railwayX, railwayY, 140, 60, colors.process, 'Railway\nConnect', 'üöÇ');
            drawArrow(550, 495, railwayX + 70, railwayY);
            
            drawRect(railwayX, railwayY + 90, 140, 60, colors.process, 'Nixpacks\nBuild', 'üì¶');
            drawArrow(railwayX + 70, railwayY + 60, railwayX + 70, railwayY + 90);
            
            drawCircle(railwayX + 70, railwayY + 200, 50, colors.end, 'Live!', '‚úÖ');
            drawArrow(railwayX + 70, railwayY + 150, railwayX + 70, railwayY + 150);
            
            // VERCEL yo'li
            const vercelX = 800;
            const vercelY = 600;
            
            drawRect(vercelX, vercelY, 140, 60, colors.process, 'Vercel\nConnect', '‚ñ≤');
            drawArrow(580, 470, vercelX + 70, vercelY, 'Vercel');
            
            drawRect(vercelX, vercelY + 90, 140, 60, colors.process, 'Auto\nOptimize', '‚ö°');
            drawArrow(vercelX + 70, vercelY + 60, vercelX + 70, vercelY + 90);
            
            drawCircle(vercelX + 70, vercelY + 200, 50, colors.end, 'Live!', '‚úÖ');
            drawArrow(vercelX + 70, vercelY + 150, vercelX + 70, vercelY + 150);
            
            // Domain
            drawRect(1050, 380, 150, 110, colors.data, 'Custom Domain\n(Ixtiyoriy)\nexample.com', 'üåç');
            drawArrow(940, 750, 1050, 435);
            drawArrow(690, 750, 1050, 435);
            drawArrow(370, 750, 1050, 435);
            
            // Users
            drawCircle(1050, 600, 60, colors.user, 'Foydalanuvchilar', 'üë•');
            drawArrow(1125, 435, 1100, 550);
            
            // Analytics
            drawRect(1050, 700, 150, 60, colors.process, 'Analytics &\nMonitoring', 'üìä');
            drawArrow(1125, 660, 1125, 700);
        }
        
        // DIAGRAMMA 4: Foydalanuvchi Oqimi
        function drawDiagram4() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#1e3c72';
            ctx.font = 'bold 24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('FOYDALANUVCHI OQIMI (USER FLOW)', canvas.width/2, 40);
            
            // O'quvchi
            drawCircle(150, 120, 50, colors.user, 'O\'quvchi', 'üë®‚Äçüéì');
            
            // Saytga kirish
            drawRect(80, 200, 140, 60, colors.start, 'Saytga\nKirish', 'üåê');
            drawArrow(150, 170, 150, 200);
            
            // Index sahifa
            drawRect(80, 290, 140, 60, colors.process, 'Index.html\nOchiladi', 'üè†');
            drawArrow(150, 260, 150, 290);
            
            // Model tanlash
            drawDiamond(150, 430, 180, 120, colors.decision, 'Qaysi Model\nKerak?');
            drawArrow(150, 350, 150, 370);
            
            // Rezerford
            const rezX = 150;
            const rezY = 550;
            drawRect(rezX - 200, rezY, 160, 70, colors.data, 'Rezerford\nTajribasi', '‚öõÔ∏è');
            drawArrow(110, 460, rezX - 120, rezY, 'Atom');
            
            // Sozlamalar
            drawRect(rezX - 200, rezY + 100, 160, 60, colors.process, 'Parametr\nSozlash', '‚öôÔ∏è');
            drawArrow(rezX - 120, rezY + 70, rezX - 120, rezY + 100);
            
            // Tajriba
            drawRect(rezX - 200, rezY + 190, 160, 60, colors.process, 'Tajriba\nO\'tkazish', 'üß™');
            drawArrow(rezX - 120, rezY + 160, rezX - 120, rezY + 190);
            
            // Natija
            drawRect(rezX - 200, rezY + 280, 160, 60, colors.end, 'Natijalarni\nTahlil', 'üìä');
            drawArrow(rezX - 120, rezY + 250, rezX - 120, rezY + 280);
            
            // Kepler
            const kepX = 150;
            const kepY = 550;
            drawRect(kepX + 40, kepY, 160, 70, colors.data, 'Kepler\nQonunlari', 'ü™ê');
            drawArrow(150, 490, kepX + 120, kepY);
            
            // Qonun tanlash
            drawDiamond(kepX + 120, kepY + 120, 160, 100, colors.decision, 'Qaysi\nQonun?');
            drawArrow(kepX + 120, kepY + 70, kepX + 120, kepY + 70);
            
            // 3 ta qonun
            drawRect(kepX + 250, kepY + 90, 120, 50, colors.process, '1. Ellips', '‚óã');
            drawArrow(kepX + 190, kepY + 120, kepX + 250, kepY + 115, '1');
            
            drawRect(kepX + 250, kepY + 160, 120, 50, colors.process, '2. Yuzalar', '‚ñ≥');
            drawArrow(kepX + 190, kepY + 120, kepX + 250, kepY + 185, '2');
            
            drawRect(kepX + 250, kepY + 230, 120, 50, colors.process, '3. Davr', '‚äô');
            drawArrow(kepX + 190, kepY + 120, kepX + 250, kepY + 255, '3');
            
            // Animatsiya
            drawRect(kepX + 40, kepY + 240, 160, 60, colors.end, 'Animatsiya\nKuzatish', 'üëÅÔ∏è');
            drawArrow(kepX + 370, kepY + 115, kepX + 200, kepY + 270);
            drawArrow(kepX + 370, kepY + 185, kepX + 200, kepY + 270);
            drawArrow(kepX + 370, kepY + 255, kepX + 200, kepY + 270);
            
            // Meme
            drawRect(600, 550, 160, 70, colors.data, 'Sarkazm\nMeme', 'üòè');
            drawArrow(230, 460, 600, 585, 'Hazil');
            
            drawRect(600, 650, 160, 60, colors.process, 'Tosh\nUchirish', 'ü™®');
            drawArrow(680, 620, 680, 650);
            
            drawCircle(680, 760, 50, colors.end, 'Kulish!', 'üòÇ');
            drawArrow(680, 710, 680, 710);
            
            // Dars ishlanma
            drawRect(850, 400, 160, 70, colors.process, 'Dars\nIshlanma', 'üìö');
            drawArrow(230, 430, 850, 435);
            
            // Testlar
            drawRect(850, 500, 160, 70, colors.process, 'Testlarni\nYechish', '‚úèÔ∏è');
            drawArrow(230, 430, 850, 535);
            
            // Metodika
            drawRect(850, 600, 160, 70, colors.process, 'Metodika\nO\'qish', 'üë®‚Äçüè´');
            drawArrow(230, 430, 850, 635);
            
            // O'rganish
            drawCircle(1100, 500, 60, colors.end, 'Bilim Olish!', 'üéì');
            drawArrow(1010, 435, 1050, 480);
            drawArrow(1010, 535, 1050, 510);
            drawArrow(1010, 635, 1050, 530);
            
            // Share
            drawRect(1100, 600, 140, 60, colors.user, 'Do\'stlar Bilan\nBo\'lishish', 'üë•');
            drawArrow(1125, 560, 1170, 600);
            
            // Yana kirish
            ctx.setLineDash([5, 5]);
            drawArrow(1170, 660, 1170, 750);
            drawArrow(1170, 750, 150, 750);
            drawArrow(150, 750, 150, 170);
            ctx.setLineDash([]);
        }
        
        // Diagrammalarni almashtirish
        function showDiagram(num) {
            currentDiagram = num;
            
            // Tab aktivini o'zgartirish
            document.querySelectorAll('.tab').forEach((tab, index) => {
                tab.classList.toggle('active', index + 1 === num);
            });
            
            // Diagramma chizish
            switch(num) {
                case 1:
                    drawDiagram1();
                    updateInfo('Loyihaning umumiy arxitekturasi: boshlang\'ichdan yakuniy natijagacha barcha bosqichlar.');
                    break;
                case 2:
                    drawDiagram2();
                    updateInfo('Interaktiv modelning ishlash mexanizmi: foydalanuvchi harakatidan ekranda ko\'rsatilishigacha.');
                    break;
                case 3:
                    drawDiagram3();
                    updateInfo('Deploy jarayoni: lokal kompyuterdan jonli saytgacha. 3 ta platforma varianti.');
                    break;
                case 4:
                    drawDiagram4();
                    updateInfo('Foydalanuvchi oqimi: o\'quvchi saytga kirib, modellarda ishlashi va bilim olishi.');
                    break;
            }
        }
        
        // Info yangilash
        function updateInfo(text) {
            document.getElementById('infoText').textContent = text;
        }
        
        // Yuklab olish
        function downloadDiagram() {
            const link = document.createElement('a');
            link.download = `loyiha-algoritm-${currentDiagram}.png`;
            link.href = canvas.toDataURL();
            link.click();
        }
        
        // Chop etish
        function printDiagram() {
            const dataUrl = canvas.toDataURL();
            const windowContent = '<!DOCTYPE html>';
            const printWin = window.open('', '', 'width=1400,height=900');
            printWin.document.write(windowContent);
            printWin.document.write('<html><head><title>Loyiha Algoritmi</title></head><body>');
            printWin.document.write('<img src="' + dataUrl + '" style="width:100%;">');
            printWin.document.write('</body></html>');
            printWin.document.close();
            printWin.focus();
            printWin.print();
            printWin.close();
        }
        
        // Boshlang'ich diagramma
        showDiagram(1);
        
        // Canvas ustiga click
        canvas.addEventListener('click', function(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            console.log(`Click: (${x.toFixed(0)}, ${y.toFixed(0)})`);
            updateInfo(`Click joyi: X=${x.toFixed(0)}, Y=${y.toFixed(0)}. Elementlar ustiga bosib batafsil ma'lumot olishingiz mumkin (keyingi versiyada).`);
        });
    </script>
</body>
</html>
